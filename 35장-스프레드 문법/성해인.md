# 35. 스프레드 문법

> ***<big>스프레드 문법</big>(spread syntax, 전개 문법)***
> ***
> `...`로
> <br>하나로 뭉쳐있는 여러 값들의 집합을 <u>펼쳐서</u>(=전개/분산/spread) 개별적인 값들의 목록으로 만듦
> ***
> * ES6에서 도입됨
> * 스프레드 문법 사용 대상은 `for...of`문으로 순회 가능한 이터러블(iterable)에 한정됨
>   * Array
>   * String
>   * Map</div>
>   * Set
>   * DOM Collection(NodeList, HTMLCollection)
>   * arguments
> * 스프레드 문법의 결과는 값이 아니다
>   * 그러므로 변수에는 할당할 수 없다
>   * 대신 쉼표로 구분한 값의 목록을 사용하는 문맥에서는 사용 가능하다
>     * 함수 호출문의 인수 목록
>     * 배열 리터럴의 요소 목록
>     * 객체 리터럴의 프로퍼티 목록

<br>

#### 예제 35-01: iterable에서 사용되는 스프레드 문법
```Javascript
// ...[1, 2, 3]은 [1, 2, 3]을 개별 요소로 분리한다(→ 1, 2, 3)
console.log(...[1, 2, 3]); // 1 2 3

// 문자열은 이터러블이다.
console.log(...'Hello'); // H e l l o

// Map과 Set은 이터러블이다.
console.log(...new Map([['a', '1'], ['b', '2']])); // [ 'a', '1' ] [ 'b', '2' ]
console.log(...new Set([1, 2, 3])); // 1 2 3

// 이터러블이 아닌 일반 객체는 스프레드 문법의 대상이 될 수 없다.
console.log(...{ a: 1, b: 2 });
// TypeError: Found non-callable @@iterator
```

<br>

#### 예제 35-02: 스프레드 문법의 결과는 값이 아니다. 
```Javascript
const list = ...[1, 2, 3]; // SyntaxError: Unexpected token ...
```

<br>

## 35.1 함수 호출문의 인수 목록에서 사용하는 경우

#### 예제 35-03: [실패 케이스] 배열(=요소들의 집합) -> 개별 값 목록 -> 함수 인수 목록 전달
```Javascript
const arr = [1, 2, 3];

// Math.max 메서드는 매개변수 개수를 확정할 수 없는 가변 인자 함수이다.
const max = Math.max(arr); // NaN
```
<br>

#### 예제 35-04: Math.max 작동 예시
<img src="shi_images%2Fimg.png" width="200">

<br>

#### 예제 35-05: 인수가 배열이면 Math.max가 처리를 못함
<img src="shi_images%2Fimg_1.png" width="200">

<br>


#### Math.max한테 먹히려면 배열을 *개별 값 목록*으로 변환해서 인수로 줘야 함


#### 예제 35-06: `Function.prototype.apply`로 인수 -> 개별 값 목록 변환해서 주기
```Javascript
var arr = [1, 2, 3];

var max = Math.max.apply(null, arr); 
// → 3
```
* apply 함수는 2번째 인수로 배열을 받아들이고 이걸 개별 data의 목록화시켜서 전달한다

<br>

#### 예제 35-07: `Function.prototype.apply`대신 스프레드 문법 써보기
```Javascript
const arr = [1, 2, 3];

const max = Math.max(...arr); // ... 이게 배열을 '편다'는 의미
// → 3
```
<br>

> **스프레드 문법과 Rest 파라미터를 헷갈리지 않게 주의할 것!**
> * 서로 *반대*의 개념임
 
| 스프레드 문법               | Rest파라미터                   |
|:----------------------|:---------------------------|
| 이터러블을 펼쳐서 개별 값 목록 만들기 | 함수에 전달된 인수 목록을 배열로 전달받기 위함 |

<br>

#### 예제 35-08

<img src="shi_images%2Fimg_2.png" width="200">| <img src="shi_images%2Fimg_3.png" width="200">  
:---:|:-----------------------------------------------:|

<br>

## 35.2 배열 리터럴 내부에서 사용하는 경우


### 35.2.1 concat: n개의 배열을 결합하고 싶을 때

|                예제 35-09(ES5시절)                |                 예제 35-10(ES6~)                 |
|:---------------------------------------------:|:----------------------------------------------:|
|                  *concat* 필수                  |                  *스프레드 문법* 등장                  |
| <img src="shi_images%2Fimg_4.png" width="200"> | <img src="shi_images%2Fimg_5.png" width="200"> |


<br>

### 35.2.2 splice: 배열 중간에 다른 배열의 요소들을 추가/제거하고 싶을 때

#### 예제 35-11: 실패 케이스 (기대한 것: [1, 2, 3, 4])
```Javascript
var arr1 = [1, 4];
var arr2 = [2, 3];

arr1.splice(1, 0, arr2);
console.log(arr1);
// → [1, [2, 3], 4] // 2, 3요소가 각각 추가되는 게 아니라 [2, 3] 배열 자체가 추가되어버림
```

<br>

|                                  예제 35-12(ES5시절)                                   |                       예제 35-13(ES6~)                        |
|:----------------------------------------------------------------------------------:|:-----------------------------------------------------------:|
|                                    *splice* 필수                                     |                        *스프레드 문법* 등장                         |
|            <img src="shi_images%2Fimg_6.png" width="350" height="150">             | <img src="shi_images%2Fimg_7.png" width="200" height="150"> |
| [1,0].concat(arr2) → [1, 0, 2, 3]<br/>arr1[1]부터 0개의 요소를 제거하고, <br/>그 자리에 (2, 3) 삽입 ||

<br>

### 35.2.3 배열 복사
> 얕은 복사(shallow copy)

|                        예제 35-14(ES5)                        |           예제 35-15(ES6~)            |
|:-----------------------------------------------------------:|:-----------------------------------:|
|                         *slice* 필수                          |            *스프레드 문법* 등장             |
| <img src="shi_images%2Fimg_8.png" width="200" height="170"> | <img src="shi_images%2Fimg_9.png" width="200" height="170"> |

<br>

### 35.2.4 이터러블을 배열로 변환

> ES5 까지는 <br>`Function.prototype.apply` 또는 `Function.prototype.call`메서드로 <br/>`slice` 메서드 호출해야만 했음

|             이터러블이면서 유사 배열 → 배열 <br/>(arguments)              |                  유사 배열 → 배열<br/>(arrayLike)                  |
|:------------------------------------------------------------:|:------------------------------------------------------------:|
| <img src="shi_images%2Fimg_10.png" width="300" height="150"> | <img src="shi_images%2Fimg_11.png" width="240" height="150"> |

<br>

> ES6에서 등장한 스프레드 문법으로<br>보다 간편하게 이터러블을 배열로 변환할 수 있다.

|                    스프레드 문법<br/>(예제 35-18)                    |                Rest 파라미터로도 가능<br/>(예제 35-19)                 |
|:------------------------------------------------------------:|:------------------------------------------------------------:|
| <img src="shi_images%2Fimg_12.png" width="350" height="100"> | <img src="shi_images%2Fimg_13.png" width="400" height="100"> |

<br>

> 이터러블이 아닌 유사 배열 객체는 스트레드 문법의 대상이 될 수 없다.

#### 예제 35-20
<img src="shi_images%2Fimg_14.png" width="300">

* 책에는 오류 문구가 <br>`TypeError: object is not iterable (cannot read property Symbol(Symbol.iterator))`<br>...라고 적혀있음 

<br>

> 이터러블이 아닌 유사 배열 객체를 배열로 변경하려면 `Array.from` 메서드 사용<br>(ES6에서 도입)

#### 예제 35-21
<img src="shi_images%2Fimg_15.png" width="200">

<br>

## 35.3 객체 리터럴 내부에서 사용하는 경우